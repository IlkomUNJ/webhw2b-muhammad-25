<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Add Product</title>
  <script src="https://cdn.tailwindcss.com"></script>
  @vite('resources/css/style.css')
  <style>
    body { display: block; background-color: #131313; }
  </style>
</head>
<body class="text-white">
  @include('pages/partials/navbar')
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-[100px]">
    <h1 class="text-3xl font-semibold mb-6">Add Product</h1>

    <form id="productForm" action="/add-product" method="POST" enctype="multipart/form-data" class="space-y-6">
      <div>
        <label for="productName" class="block mb-2">Product Title</label>
        <input type="text" id="productName" name="productName"
               class="w-full p-4 bg-[#24303a] rounded-lg text-white placeholder-gray-400"
               placeholder="Enter product title" required>
      </div>

      <div>
        <label for="productPrice" class="block mb-2">Price</label>
        <input type="number" id="productPrice" name="productPrice"
               class="w-full p-4 bg-[#24303a] rounded-lg text-white placeholder-gray-400"
               placeholder="Price (number)" required>
      </div>

      <div>
        <label for="productStock" class="block mb-2">Stock</label>
        <input type="number" id="productStock" name="productStock"
               class="w-full p-4 bg-[#24303a] rounded-lg text-white placeholder-gray-400"
               placeholder="Available stock" required>
      </div>

      <div>
        <label for="productDescription" class="block mb-2">Product Description</label>
        <textarea id="productDescription" name="productDescription" rows="5"
                  class="w-full p-4 bg-[#24303a] rounded-lg text-white placeholder-gray-400"
                  placeholder="Describe your product..." required></textarea>
      </div>

      <div>
        <label for="productImage" class="block mb-2">Product Images (Maximum 4 files)</label>
        <input type="file" id="productImage" name="productImage[]" accept=".jpg,.jpeg,.png" multiple
               class="w-full p-3 bg-[#24303a] rounded-lg text-white" />
        <p class="text-sm text-gray-400 mt-1">Only JPG, JPEG, PNG files are allowed. Maximum 4 images.</p>
      </div>

      <button type="submit" class="w-full py-3 rounded-lg text-white text-lg font-medium
                                  bg-emerald-500 hover:bg-emerald-400 transition">
        Add Product
      </button>
    </form>
  </div>

  <script>
    document.getElementById('productForm').addEventListener('submit', function (e) {
      const files = document.getElementById('productImage').files;
      if (files.length > 4) {
        alert('You can only upload a maximum of 4 images.');
        e.preventDefault();
        return;
      }
      for (let i = 0; i < files.length; i++) {
        const f = files[i];
        const ext = f.name.split('.').pop().toLowerCase();
        if (!['jpg', 'jpeg', 'png'].includes(ext)) {
          alert('File format not allowed: ' + f.name);
          e.preventDefault();
          return;
        }
      }
    });
  </script>
</body>
</html>
